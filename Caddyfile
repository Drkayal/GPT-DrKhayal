gp-khayal.top {
  encode zstd gzip
  @static {
    path /assets/*
  }
  handle @static {
    uri strip_prefix /
    reverse_proxy openhands:3000
  }
  reverse_proxy openhands:3000 {
    header_up Host {host}
    header_up X-Forwarded-Host {host}
    header_up X-Forwarded-For {remote}
    header_up X-Forwarded-Proto {scheme}
  }

  header {
    # Enforce HTTPS
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    # Basic CSP: adjust src lists as needed if external resources are used
    Content-Security-Policy "default-src 'self'; img-src 'self' data: blob:; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src 'self' wss: https:; font-src 'self' data:; frame-ancestors 'none'"
    X-Content-Type-Options "nosniff"
    X-Frame-Options "DENY"
    Referrer-Policy "strict-origin-when-cross-origin"
  }
}